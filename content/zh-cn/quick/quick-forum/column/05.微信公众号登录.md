05.微信公众号登录.md
---


本地开发测试demo

获取微信公众号返回

```bash
curl -X POST 'http://localhost:8080/wx/callback' -H 'content-type:application/xml' -d '<xml><URL><![CDATA[https://hhui.top]]></URL><ToUserName><![CDATA[一灰灰blog]]></ToUserName><FromUserName><![CDATA[demoUser1234]]></FromUserName><CreateTime>1655700579</CreateTime><MsgType><![CDATA[text]]></MsgType><Content><![CDATA[login]]></Content><MsgId>11111111</MsgId></xml>' -i
```


测试登录

```bash

curl 'http://localhost:8080/login?code=771755' -i
```

SELECT data.day, IFNULL(data.count, 0), day_list.day as date from 
	(select DATE_FORMAT(create_time, '%Y-%m-%d') day, count(id) count from u1 GROUP BY day) data
right join 
	(SELECT @date := DATE_ADD(@date, interval 1 day) day from  (SELECT @date := DATE_ADD('2022-06-29', interval - 1 day) from u1) days limit 30) day_list 
on day_list.day = data.day



```
select * from 
(select date_format(create_at, '%Y-%m-%d') today, count(*) as cnt from zd_user_info where create_at > '2022-08-01' group by today as l)
left join 
(select date_format(create_at, '%Y-%m-%d') today, count(*) as cnt from zd_user_info where uuid like 'owl-%' create_at > '2022-08-01' group by today as r)

on l.today = r.today 
```
